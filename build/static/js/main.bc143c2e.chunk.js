(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{26:function(e,n,t){},46:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t(1),a=t.n(c),o=t(19),s=t.n(o),u=(t(26),t(3)),i=t(4),l=t.n(i),b=t(20),d=t(10),j=t(8),f=t(6),h=t.n(f),m="http://localhost:3001/api/persons",p=function(e){return h.a.put(m+"/"+e.id,e)},O={success:{backgroundColor:"green"},error:{backgroundColor:"red"}};var v=function(e){var n=e.message,t=e.classStyle;return console.log("classStyle",t),null===n?null:Object(r.jsx)("div",{style:O[t],children:n})};function g(e){var n=e.persons,t=e.setPersons,a=Object(c.useState)(""),o=Object(u.a)(a,2),s=o[0],i=o[1],f=Object(c.useState)(""),O=Object(u.a)(f,2),g=O[0],x=O[1],w=Object(c.useState)("Add name here"),k=Object(u.a)(w,2),N=k[0],S=k[1],C=Object(c.useState)("Add number here"),y=Object(u.a)(C,2),P=y[0],F=y[1],A=function(e,n){i(e),x(n),setTimeout((function(){i(null)}),5e3)},D=function(){var e=Object(j.a)(l.a.mark((function e(r){var c,a,o,s,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),!n.map((function(e){return e.name})).includes(N)){e.next=24;break}if(c=n.find((function(e){return e.name===N})),console.log("curPerson",c),!window.confirm(N+" already exists in the phone book, replace the old number with a new one?")){e.next=23;break}return a=Object(d.a)(Object(d.a)({},c),{},{number:P}),e.prev=7,e.next=10,p(a);case 10:o=e.sent,s=n.map((function(e){return e.id===a.id?a:e})),t(s),console.log(o),A("".concat(c.name,"'s number has been updated from ").concat(c.number," to ").concat(P),"success"),e.next=23;break;case 17:e.prev=17,e.t0=e.catch(7),console.log(c),x("error"),A("Information of ".concat(c.name," has already been removed from server"),"error"),console.log(e.t0);case 23:return e.abrupt("return");case 24:u={name:N,number:P,id:Date.now()},(i=u,h.a.post(m,i)).then((function(e){console.log(e.data),t([].concat(Object(b.a)(n),[u])),A("Added ".concat(u.name),"success")})).catch((function(e){console.log(e)}));case 26:case"end":return e.stop()}var i}),e,null,[[7,17]])})));return function(n){return e.apply(this,arguments)}}(),L=function(e){var n=e.target.name;console.log(e.target.value),"changeName"===n&&S(e.target.value),"changeNumber"===n&&F(e.target.value)};return Object(r.jsxs)("div",{children:[Object(r.jsx)("h3",{children:"Add a new"}),Object(r.jsx)(v,{message:s,classStyle:g}),Object(r.jsxs)("form",{onSubmit:D,children:[Object(r.jsxs)("div",{children:["name:"," ",Object(r.jsx)("input",{onChange:L,value:N,name:"changeName"})]}),Object(r.jsxs)("div",{children:["number:"," ",Object(r.jsx)("input",{onChange:L,value:P,name:"changeNumber"})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})]})}function x(e){var n=e.setFilterName,t=e.filterName;return Object(r.jsxs)("div",{children:["filter shown with"," ",Object(r.jsx)("input",{onChange:function(e){n(e.target.value)},value:t,name:"filterName"})]})}function w(e){var n=e.persons,t=e.filterName,c=e.setPersons,a=n.filter((function(e){return e.name.toLowerCase().startsWith(t.toLowerCase())})),o=function(){var e=Object(j.a)(l.a.mark((function e(t){var r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),!window.confirm("Delete ".concat(t.name))){e.next=14;break}return e.prev=2,e.next=5,o=t.id,h.a.delete(m+"/"+o);case 5:r=e.sent,a=n.filter((function(e){return e.id!==t.id})),c(a),console.log("success",r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:case"end":return e.stop()}var o}),e,null,[[2,11]])})));return function(n){return e.apply(this,arguments)}}(),s=a.map((function(e,n){return Object(r.jsxs)("p",{children:["Name: ",e.name,", Number: ",e.number,","," ",Object(r.jsx)("button",{onClick:function(){o(e)},children:"delete"})]},n)}));return Object(r.jsx)("div",{children:s})}var k=function(){var e=Object(c.useState)([]),n=Object(u.a)(e,2),t=n[0],a=n[1],o=Object(c.useState)(""),s=Object(u.a)(o,2),i=s[0],l=s[1];return Object(c.useEffect)((function(){h.a.get(m).then((function(e){a(e.data)}))}),[]),Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(x,{persons:t,filterName:i,setFilterName:l}),Object(r.jsx)(g,{persons:t,setPersons:a}),Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)(w,{persons:t,setPersons:a,filterName:i})]})},N=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,47)).then((function(n){var t=n.getCLS,r=n.getFID,c=n.getFCP,a=n.getLCP,o=n.getTTFB;t(e),r(e),c(e),a(e),o(e)}))};s.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(k,{})}),document.getElementById("root")),N()}},[[46,1,2]]]);
//# sourceMappingURL=main.bc143c2e.chunk.js.map